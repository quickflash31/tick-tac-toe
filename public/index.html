<!--suppress HtmlUnknownTarget, JSUnresolvedLibraryURL -->
<html lang="English">

<head>
    <title>Play Tic Tac Toe</title>
    <!-- Le styles -->
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
        table{
            height:90vh;
        }
        tr{
            height:30vh;
        }
        td{
            width:30vw;
        }
    </style>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
</head>

<body>
    <div class="content">
        <h1>Tic Tac Toe</h1>
        <p>Welcome to Isaiah's Tic Tac Toe Awesome Webapp</p>
        <div class="table-responsive">
        <table id="gameboard" class="table table-bordered">
            <tbody>
            <tr>
                <td id="00" onclick="handleCellClick(0, 0)"></td>
                <td id="01" onclick="handleCellClick(0, 1)"></td>
                <td id="02" onclick="handleCellClick(0, 2)"></td>
            </tr>
            <tr>
                <td id="10" onclick="handleCellClick(1, 0)"></td>
                <td id="11" onclick="handleCellClick(1, 1)"></td>
                <td id="12" onclick="handleCellClick(1, 2)"></td>
            </tr>
            <tr>
                <td id="20" onclick="handleCellClick(2, 0)"></td>
                <td id="21" onclick="handleCellClick(2, 1)"></td>
                <td id="22" onclick="handleCellClick(2, 2)"></td>
            </tr>
            </tbody>
        </table>
        </div>
    </div>
</body>
<script
        src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs="
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<script>
  "use strict";
  let turnNumber = 0;
  const boardState = [
    ["", "", ""],
    ["", "", ""],
    ["", "", ""]
  ];

  function isEven(value) {
    // noinspection RedundantIfStatementJS
    if (value % 2 === 0) {
      return true;
    } else {
      return false;
    }
  }

  function drawBoardState(isThereAWinner) {
    for (let row = 0; row < 3; row++) {
      for (let col = 0; col < 3; col++) {

        let element = `${row}${col}`;
        console.log(`element is ${element}`);

        let boardStateCell = boardState[row][col];
        console.log(`board state is ${boardStateCell}`);
        console.log(`isThereaWinner is ${isThereAWinner}`);
        let winner = "";
        if (isThereAWinner === true) {
          if (isEven(turnNumber)) {
            winner = "X";
          } else {
            winner = "O";
          }
        $("#gameboard").replaceWith("<div class=\"jumbotron\">\n" +
          `  <h1 class="display-4">Congratulations! You Won Player ${winner}</h1>\n` +
          "  <p class=\"lead\">good job hope yo enjoyed pleas play agian</p>\n" +
          "  <hr class=\"my-4\">\n" +
          "  <p>:):):):)</p>\n" +
          "  <p onClick=\"window.location.reload();\" class=\"lead\">\n" +
          "    <a class=\"btn btn-primary btn-lg\" href=\"#\" role=\"button\">play again</a>\n" +
          "  </p>\n" +
          "</div>");
        }
        if (boardStateCell === "X") {
          $(`#${row}${col}`).replaceWith(`<td class="bg-warning" id="${row}${col}"><img class="img-fluid" src="/images/x.png" alt="X"></td>`);
        } else if (boardStateCell === "O") {
          $(`#${row}${col}`).replaceWith(`<td class="bg-info" id="${row}${col}"><img class="img-fluid" src="/images/o.png" alt="O"></td>`);
        }
      }
    }
  }

  function handleCellClick(row, col) { // jshint ignore:line
    console.log(`turn number ${turnNumber}`);
    if (isEven(turnNumber)) {
      boardState[row][col] = "X";
    } else {
      boardState[row][col] = "O";
    }
    console.log(boardState);
    let isThereAWinner = lookforwinner();
    drawBoardState(isThereAWinner);
    turnNumber++;
  }

  function lookforwinner() {
    for (let row = 0; row < 3; row++) {
      let colZero = boardState[row][0];
      let colOne = boardState[row][1];
      let colTwo = boardState[row][2];
      console.log(`the row (${row}) is ${colZero}, ${colOne}, ${colTwo}`);
      if (colZero === "X" || colZero === "O") {
        if ((colZero === colOne) && (colZero === colTwo)) {
          console.log(`winner on row ${row}`);
          return true;
        } else {
          console.log(`no winner row ${row}`);
        }
      }
    }
    for (let col = 0; col < 3; col++) {
      let rowZero = boardState[0][col];
      let rowOne = boardState[1][col];
      let rowTwo = boardState[2][col];
      if (rowZero === "X" || rowZero === "O") {
        if ((rowZero === rowOne) && (rowZero === rowTwo)) {
          console.log(`winner on col ${col}`);
          return true;
        } else {
          console.log(`no winner col ${col}`);
        }
      }
    }
    let dZero = boardState[0][0];
    let dOne = boardState[1][1];
    let dTwo = boardState[2][2];
    if (dZero === "X" || dZero === "O") {
      if ((dZero === dOne) && (dZero === dTwo)) {
        console.log(`winner on first diagonal`);
        return true;
      } else {
        console.log(`no winner first diagonal`);
      }
    }
    let d2Zero = boardState[0][2];
    let d2One = boardState[1][1];
    let d2Two = boardState[2][0];
    if (d2Zero === "X" || d2Zero === "O") {
      if ((d2Zero === d2One) && (d2Zero === d2One)) {
        console.log(`winner on second diagonal`);
        return true;
      } else {
        console.log(`no winner second diagonal`);
      }
    }
    return false;
  }
</script>
</html>

